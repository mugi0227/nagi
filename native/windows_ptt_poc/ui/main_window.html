<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Secretary Partner</title>
  <style>
    html, body {
      height: 100%;
      overflow: hidden;
    }

    .app {
      display: flex;
      flex-direction: column;
      height: 100vh;
      padding: 0;
    }

    /* ── Custom Titlebar ───────────────────────────────────── */

    .titlebar {
      display: flex;
      align-items: center;
      padding: 10px 16px;
      background: var(--bg-main);
      -webkit-app-region: drag;
      flex-shrink: 0;
    }

    .titlebar-title {
      font-size: 15px;
      font-weight: 700;
      color: var(--text-main);
      margin-right: 10px;
    }

    .titlebar-buttons {
      margin-left: auto;
      display: flex;
      gap: 6px;
      -webkit-app-region: no-drag;
    }

    /* ── Content area ──────────────────────────────────────── */

    .content {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 0 16px 14px;
      flex: 1;
      min-height: 0;
      overflow-y: auto;
    }

    /* ── Status section ────────────────────────────────────── */

    .status-area {
      padding: 0 0 4px;
    }

    #statusText {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-main);
    }

    #hintText {
      font-size: 12px;
      color: var(--primary);
      margin-top: 2px;
    }

    /* ── Auth card ─────────────────────────────────────────── */

    #userLabel {
      font-size: 13px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 8px;
    }

    #linkCode {
      flex: 1;
      max-width: 220px;
    }

    /* ── Hotkey card ───────────────────────────────────────── */

    #hotkeySelect {
      width: 80px;
    }

    #currentHotkey {
      font-size: 12px;
      color: var(--text-muted);
      margin-left: 4px;
    }

    /* ── Transcript card ───────────────────────────────────── */

    .transcript-card {
      display: flex;
      flex-direction: column;
      flex: 1;
      min-height: 0;
    }

    .transcript-card .section-label {
      margin-bottom: 6px;
    }

    #transcriptText {
      flex: 1;
      min-height: 80px;
      max-height: 200px;
      overflow-y: auto;
      user-select: text;
      -webkit-user-select: text;
    }

    .btn-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .btn-row-right {
      margin-left: auto;
      display: flex;
      gap: 8px;
    }

    /* ── Response area ─────────────────────────────────────── */

    .response-label {
      margin-top: 10px;
      margin-bottom: 4px;
    }

    #responseText {
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 8px 12px;
      font-size: 12px;
      color: var(--text-muted);
      min-height: 48px;
      max-height: 100px;
      overflow-y: auto;
      line-height: 1.5;
      white-space: pre-wrap;
      word-break: break-word;
      user-select: text;
      -webkit-user-select: text;
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Titlebar -->
    <div class="titlebar">
      <span class="titlebar-title">Secretary Partner</span>
      <span class="status-dot" id="statusDot"></span>
      <div class="titlebar-buttons">
        <button class="btn btn-subtle btn-sm" id="hideBtn">非表示</button>
        <button class="btn btn-danger btn-sm" id="closeBtn">終了</button>
      </div>
    </div>

    <!-- Content -->
    <div class="content">
      <!-- Status -->
      <div class="status-area">
        <div id="statusText">起動中...</div>
        <div id="hintText"></div>
      </div>

      <!-- Auth Card -->
      <div class="card" id="authCard">
        <div id="userLabel">認証: 未連携</div>
        <div class="row">
          <input type="text" id="linkCode" placeholder="連携コード">
          <button class="btn btn-primary btn-sm" id="linkBtn">Link</button>
          <button class="btn btn-subtle btn-sm" id="openLinkPage">連携ページを開く</button>
        </div>
      </div>

      <!-- Hotkey Card -->
      <div class="card">
        <div class="row">
          <span class="section-label" style="margin-right: 8px;">ホットキー</span>
          <select id="hotkeySelect">
            <option value="F1">F1</option>
            <option value="F2">F2</option>
            <option value="F3">F3</option>
            <option value="F4">F4</option>
            <option value="F5">F5</option>
            <option value="F6">F6</option>
            <option value="F7">F7</option>
            <option value="F8" selected>F8</option>
            <option value="F9">F9</option>
            <option value="F10">F10</option>
            <option value="F11">F11</option>
            <option value="F12">F12</option>
          </select>
          <button class="btn btn-primary btn-sm" id="applyHotkey">適用</button>
          <span id="currentHotkey">現在のホットキー: F8</span>
        </div>
      </div>

      <!-- Transcript Card -->
      <div class="card transcript-card">
        <span class="section-label">文字起こし / 入力</span>
        <textarea id="transcriptText" placeholder="ここに文字起こし結果が表示されます..." rows="4"></textarea>
        <div class="btn-row">
          <button class="btn btn-primary" id="sendBtn">送信 (Enter)</button>
          <button class="btn btn-secondary btn-sm" id="clearBtn">クリア</button>
          <div class="btn-row-right">
            <button class="btn btn-subtle btn-sm" id="openWeb">Webアプリ</button>
            <button class="btn btn-subtle btn-sm" id="openTasks">タスクを開く</button>
          </div>
        </div>
        <span class="section-label response-label">最新の応答</span>
        <div id="responseText"></div>
      </div>
    </div>
  </div>

  <script src="main.js"></script>
</body>
</html>
